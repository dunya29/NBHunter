const header=document.querySelector(".header"),mainHeader=document.querySelector(".main-header"),iconMenu=document.querySelector(".icon-menu"),fixedBlocks=document.querySelectorAll(".fixed-block"),modalShowBtn=document.querySelectorAll(".modal-show-btn"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector("#success-modal"),errorModal=document.querySelector("#error-modal"),overlay=document.querySelector(".overlay"),customSelect=document.querySelectorAll(".select-custom"),filter=document.querySelector(".filter-cat__form"),priceFilter=document.querySelector(".price-filter");let animSpd=500;function enableScroll(){fixedBlocks&&fixedBlocks.forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){let e=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0;fixedBlocks&&fixedBlocks.forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll")}function tabSwitch(e,t){e.forEach(((c,r)=>{c.addEventListener("click",(()=>{c.getAttribute("data-nav");e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),c.classList.add("active"),t[r].classList.add("active"),c.style.opacity="0",t[r].style.opacity="0",setTimeout((()=>{c.style.opacity="1",t[r].style.opacity="1"}),0)}))}))}function smoothDrop(e,t){if(e.classList.contains("active"))t.style.height="0px";else{t.style.height="auto";let e=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=e}),0)}e.classList.toggle("active")}function openSelectCustom(e){e.classList.add("open"),e.setAttribute("aria-expanded",!0),e.querySelectorAll(".select-custom__option input").forEach((t=>{t.addEventListener("change",(t=>{setActiveOption(e),closeSelectCustom(e)}))})),document.addEventListener("click",(function t(c){e.contains(c.target)||(closeSelectCustom(e),document.removeEventListener("click",t))}))}function setActiveOption(e){let t=e.querySelector("input:checked").nextElementSibling.innerHTML;e.querySelector(".select-custom__selected span").innerHTML=t}function closeSelectCustom(e){e.classList.remove("open"),e.setAttribute("aria-expanded",!1)}function resetBtnVisible(e){e.querySelector(".icon-close").style.opacity="1",e.querySelector(".icon-close").style.visibility="visible"}function resetBtnHidden(e){e.querySelector(".icon-close").style.opacity="0",e.querySelector(".icon-close").style.visibility="hidden"}function searchReset(e){e.querySelectorAll("input").forEach((e=>{"hidden"!=e.type&&(e.value="")})),resetBtnHidden(e)}window.addEventListener("load",(()=>{document.body.classList.remove("no-scroll"),disableScroll();let e=0,t=setInterval((()=>{document.querySelector(".preloader__percent").textContent=e,e++,101===e&&(clearInterval(t),setTimeout((()=>{enableScroll()}),1600))}),1)})),window.addEventListener("scroll",(()=>{(window.pageYOffset||document.documentElement.scrollTop)>1?header.classList.add("scrolled"):header.classList.remove("scrolled")})),document.querySelectorAll(".js-anchor").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let c=e.getAttribute("href"),r=window.pageYOffset||document.documentElement.scrollTop;if(document.querySelector(c)){let e=r+document.querySelector(c).getBoundingClientRect().top;window.scrollTo({top:e-60,behaviour:"smooth"})}}))})),iconMenu.addEventListener("click",(()=>{header.classList.contains("active")?(header.classList.remove("active"),iconMenu.setAttribute("aria-label","Открыть меню"),enableScroll()):(header.classList.add("active"),iconMenu.setAttribute("aria-label","Закрыть меню"),disableScroll())})),document.querySelectorAll(".menu li").forEach((e=>{e.addEventListener("click",(()=>{header.classList.contains("active")&&(header.classList.remove("active"),iconMenu.setAttribute("aria-label","Открыть меню"),enableScroll())}))}));const search=document.querySelectorAll(".search");if(search.forEach((e=>{e.querySelector("input").addEventListener("input",(()=>{e.querySelector("input").value.length>0?resetBtnVisible(e):resetBtnHidden(e)}))})),customSelect&&customSelect.forEach((e=>{setActiveOption(e),e.querySelector(".select-custom__selected").addEventListener("click",(()=>{e.classList.contains("open")?closeSelectCustom(e):openSelectCustom(e)}))})),document.querySelector(".rec-catalog")){new Swiper(".rec-catalog .swiper",{slidesPerView:1,spaceBetween:18,observer:!0,observeParents:!0,loop:!0,speed:800,autoplay:{delay:3500,disableOnInteraction:!1},navigation:{prevEl:".rec-catalog .swiper-btn--prev",nextEl:".rec-catalog .swiper-btn--next"},breakpoints:{991.98:{slidesPerView:4,spaceBetween:18},767.98:{slidesPerView:3,spaceBetween:18},520.98:{slidesPerView:2,spaceBetween:18}}})}const productNavs=document.querySelectorAll(".info-product [data-nav]"),productBlocks=document.querySelectorAll(".info-product [data-block]");if(document.querySelector(".info-product")&&tabSwitch(productNavs,productBlocks),document.querySelector(".product__swipers")){const e=new Swiper(".product__thumbswiper",{slidesPerView:4,spaceBetween:8,direction:"horizontal",observer:!0,observeParents:!0,speed:800,breakpoints:{600.98:{direction:"vertical"}}});new Swiper(".product__mainswiper",{slidesPerView:1,observer:!0,observeParents:!0,effect:"fade",thumbs:{swiper:e}})}const secFilterHeader=document.querySelectorAll(".sec-filter__header"),secFilterBody=document.querySelectorAll(".sec-filter__body");function initSliders(){let e=priceFilter.querySelector(".price-start"),t=priceFilter.querySelector(".price-end"),c=priceFilter.querySelector(".price-filter__slider"),r=+priceFilter.getAttribute("data-start"),l=+priceFilter.getAttribute("data-end"),i=+priceFilter.getAttribute("data-min"),o=+priceFilter.getAttribute("data-max");noUiSlider.create(c,{start:[r,l],connect:!0,range:{min:i,max:o}}),e.addEventListener("focus",(()=>{e.value=e.value.replaceAll(" ","")})),t.addEventListener("focus",(()=>{t.value=t.value.replaceAll(" ","")})),e.addEventListener("change",(()=>{c.noUiSlider.set([e.value,null])})),t.addEventListener("change",(()=>{c.noUiSlider.set([null,t.value])}));let n=[e,t];c.noUiSlider.on("update",(function(e,t){n[t].value=String(parseInt(e[t])).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim()}))}secFilterHeader&&secFilterHeader.forEach(((e,t)=>{e.addEventListener("click",(()=>smoothDrop(secFilterHeader[t],secFilterBody[t])))})),document.querySelector(".catalog__filter--mobile")&&document.querySelector(".catalog__filter--mobile").addEventListener("click",(()=>{const e=document.querySelector(".filter-cat"),t=document.querySelector(".filter-cat__icon");disableScroll(),e.classList.add("active"),e.addEventListener("click",(t=>{document.querySelector(".filter-cat__inner").contains(t.target)||(e.classList.remove("active"),enableScroll())})),t.addEventListener("click",(()=>{e.classList.remove("active"),enableScroll()}))})),priceFilter&&(initSliders(),filter.addEventListener("reset",(e=>{e.preventDefault(),filter.querySelectorAll("input").forEach((e=>{e.removeAttribute("checked")})),filter.querySelector(".price-filter__slider").noUiSlider.set([+priceFilter.getAttribute("data-start"),+priceFilter.getAttribute("data-end")])})));